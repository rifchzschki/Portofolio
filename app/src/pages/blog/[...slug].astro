---
import { getEntryBySlug, getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";

const { slug } = Astro.params;
const post = await getEntryBySlug("blog", slug);

if (!post) {
  return Astro.redirect('/404');
}

const { data, body } = post;
---

<Layout>
  <article class="prose dark:prose-invert max-w-3xl mx-auto py-12">
    <header class="mb-8 text-center">
      <h1 class="text-4xl font-bold">{data.title}</h1>
      <p class="text-muted-foreground mt-2">{data.publishedAt} Â· {data.readTime}</p>
      <div class="flex justify-center gap-2 mt-3 flex-wrap">
        {data.tags?.map((tag: string) => (
          <span class="text-xs bg-primary/10 text-primary px-2 py-1 rounded">
            #{tag}
          </span>
        ))}
      </div>
    </header>
    {body}
  </article>
</Layout>
